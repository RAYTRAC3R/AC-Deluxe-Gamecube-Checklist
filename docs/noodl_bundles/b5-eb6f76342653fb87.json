[{"name":"/Collection Pages/Fish/Fish Logic","nodes":[{"id":"7e09a64a-b95a-0c80-b70f-fbf4dea3d9d0","type":"Group","parameters":{"flexDirection":"column","sizeMode":"contentHeight","borderStyle":"solid","borderWidth":{"value":3,"unit":"px"},"borderColor":"Nook Tan Dark","backgroundColor":"Nook Tan","marginTop":{"value":5,"unit":"px"},"marginBottom":{"value":0,"unit":"px"},"borderRadius":{"value":12,"unit":"px"},"marginRight":{"value":10,"unit":"px"},"paddingBottom":{"value":4,"unit":"px"}},"ports":[],"children":[{"id":"401e95b2-156f-6221-2298-ee000e8e714b","type":"Group","parameters":{"flexDirection":"row","sizeMode":"contentHeight","borderStyle":"solid","borderWidth":{"value":3,"unit":"px"},"borderColor":"Nook Tan Dark","backgroundColor":"Nook Tan","marginTop":{"value":0,"unit":"px"},"marginBottom":{"value":0,"unit":"px"},"borderLeftStyle":"none","borderTopStyle":"none","borderRightStyle":"none","alignX":"center","marginLeft":{"value":0,"unit":"px"},"marginRight":{"value":0,"unit":"px"},"borderRadius":{"value":12,"unit":"px"},"borderTopLeftRadius":{"value":12,"unit":"px"},"borderTopRightRadius":{"value":12,"unit":"px"},"borderBottomRightRadius":{"value":0,"unit":"px"},"borderBottomLeftRadius":{"value":0,"unit":"px"}},"ports":[],"children":[{"id":"d90683b6-605d-26bd-c9e4-581b9c511f9b","type":"Text","parameters":{"text":"Image","textAlignX":"center"},"ports":[],"children":[]},{"id":"534bb674-31c4-872e-c919-69b21a2ff439","type":"Text","parameters":{"text":"Name","textAlignX":"center"},"ports":[],"children":[]},{"id":"47c3c3a8-7f57-2075-4c99-6ba460c7632b","type":"Text","parameters":{"text":"Price","textAlignX":"center"},"ports":[],"children":[]},{"id":"2389dc8f-ba73-2521-38c6-f49225350df5","type":"Text","parameters":{"text":"Donated","textAlignX":"center"},"ports":[],"children":[]}]},{"id":"22d8d38b-f2b9-7d99-02d8-39e21ade0133","type":"Group","parameters":{"flexDirection":"row","marginLeft":{"value":0,"unit":"px"},"marginRight":{"value":0,"unit":"px"},"marginTop":{"value":0,"unit":"px"},"marginBottom":{"value":0,"unit":"px"},"sizeMode":"contentHeight"},"ports":[],"children":[{"id":"0ef3bb48-876d-eb7a-a299-661a92ed20ec","type":"Group","parameters":{"flexDirection":"row","justifyContent":"center"},"ports":[],"children":[{"id":"5eb5ceac-e239-2ac8-f2b6-387b879925e8","type":"Image","parameters":{"src":"images/paintings/64px-Scary_Painting_PG_Model.png","alignX":"center","alignY":"center"},"ports":[],"children":[]}]},{"id":"7ecfb115-f05c-e0e6-7663-9a39ac7c0fcb","type":"Text","parameters":{"text":"Label","wordBreak":"normal","minWidth":{"value":25,"unit":"%"},"maxWidth":{"value":25,"unit":"%"},"minHeight":{"value":25,"unit":"%"},"maxHeight":{"value":25,"unit":"%"},"textAlignX":"center","textAlignY":"center","alignY":"center","fontSize":{"value":12,"unit":"px"}},"ports":[],"children":[]},{"id":"6957d9d1-5f90-484c-9e73-eb22752b5086","type":"Text","parameters":{"text":"Price","minWidth":{"value":25,"unit":"%"},"maxWidth":{"value":25,"unit":"%"},"minHeight":{"value":25,"unit":"%"},"maxHeight":{"value":25,"unit":"%"},"textAlignX":"center","textAlignY":"center","alignY":"center"},"ports":[],"children":[]},{"id":"33be2f33-cc50-9db4-9d1e-97d735ee9a10","type":"Group","parameters":{"flexDirection":"row","justifyContent":"center","marginBottom":{"value":1,"unit":"px"},"marginTop":{"value":0,"unit":"px"},"sizeMode":"explicit"},"ports":[],"children":[{"id":"430d5c2d-65ca-d53f-de91-fc011c53155a","type":"net.noodl.controls.checkbox","parameters":{"labeltextStyle":"Title Medium","labelcolor":"Nookmiles Brown","useLabel":false,"useIcon":true,"iconSourceType":"image","iconImageSource":"images/icons/owl.png","iconSize":{"value":40,"unit":"px"},"width":{"value":48,"unit":"px"},"height":{"value":48,"unit":"px"},"borderRadius":{"value":50,"unit":"px"},"checked":false,"enabled":true,"alignX":"center","marginTop":{"value":2,"unit":"px"},"marginBottom":{"value":2,"unit":"px"}},"ports":[],"children":[]}]}]},{"id":"8a592295-90e0-6666-2541-6b6db1ec9dcb","type":"Group","parameters":{"flexDirection":"row","sizeMode":"contentHeight","borderStyle":"solid","borderWidth":{"value":3,"unit":"px"},"borderColor":"Nook Tan Dark","backgroundColor":"Nook Tan","marginTop":{"value":0,"unit":"px"},"marginBottom":{"value":0,"unit":"px"},"borderLeftStyle":"none","borderTopStyle":"solid","borderRightStyle":"none","alignX":"center","marginLeft":{"value":0,"unit":"px"},"marginRight":{"value":0,"unit":"px"},"borderBottomRightRadius":{"value":0,"unit":"px"},"borderBottomLeftRadius":{"value":0,"unit":"px"}},"ports":[],"children":[{"id":"35056bf6-d3ac-a013-8358-9bafe41ac274","type":"Text","parameters":{"text":"Time","textAlignX":"center","minWidth":{"value":33,"unit":"%"},"maxWidth":{"value":33,"unit":"%"},"minHeight":{"value":33,"unit":"%"},"maxHeight":{"value":33,"unit":"%"}},"ports":[],"children":[]},{"id":"7a3c4e42-8940-a826-63e8-60a38ce7e06a","type":"Text","parameters":{"text":"Months","textAlignX":"center","minWidth":{"value":33,"unit":"%"},"maxWidth":{"value":33,"unit":"%"},"minHeight":{"value":33,"unit":"%"},"maxHeight":{"value":33,"unit":"%"}},"ports":[],"children":[]},{"id":"b8a781c4-f2cb-66e4-04c1-7e251886185b","type":"Text","parameters":{"text":"Location","textAlignX":"center","minWidth":{"value":33,"unit":"%"},"maxWidth":{"value":33,"unit":"%"},"minHeight":{"value":33,"unit":"%"},"maxHeight":{"value":33,"unit":"%"}},"ports":[],"children":[]}]},{"id":"be0e4955-08c5-34d5-3c44-e9dc4f3ecd33","type":"Group","parameters":{"flexDirection":"row","marginLeft":{"value":0,"unit":"px"},"marginRight":{"value":0,"unit":"px"},"justifyContent":"center","marginBottom":{"value":-5,"unit":"px"}},"ports":[],"children":[{"id":"403c9b9c-fcc9-a4c9-ffa3-bda2f56dde94","type":"Text","parameters":{"text":"Time","textAlignX":"center","wordBreak":"break-all","fontSize":{"value":14,"unit":"px"}},"ports":[],"children":[]},{"id":"f28c0664-8493-43c5-9be0-7ee76a3e9f79","type":"Text","parameters":{"text":"Months","fontSize":{"value":14,"unit":"px"},"textAlignX":"center"},"ports":[],"children":[]},{"id":"c4f1f2e6-024f-fb50-75a7-d9accc651dea","type":"Text","parameters":{"text":"Weather","textAlignX":"center","fontSize":{"value":14,"unit":"px"}},"ports":[],"children":[]}]}]},{"id":"6974af9b-1a24-4285-7d37-ffb29930967c","type":"Model2","parameters":{"idSource":"foreach","properties":"Image,Label,Price,Checked,id,Location,Time,Months"},"ports":[],"children":[]},{"id":"870cfb4c-7c94-b58f-fe47-8608ea537e51","type":"SetModelProperties","parameters":{"properties":"Checked"},"ports":[],"children":[]},{"id":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","type":"JavaScriptFunction","parameters":{"functionScript":"const id = Inputs.ID || '';\nconst label = Inputs.Label || '';\nconst price = Inputs.Price || '';\nconst icon = Inputs.Icon || '';\nconst weather = Inputs.Weather || '';\nconst time = Inputs.Time || '';\nconst months = Inputs.Months || '';\nconst checked = Inputs.Checked || false; // Added checked\n\n// Function to load data from localStorage\nfunction loadSelection(id, callback) {\n    const storedData = localStorage.getItem(id);\n    if (storedData) {\n        callback(JSON.parse(storedData));\n    } else {\n        callback(null);\n    }\n}\n\n// Function to handle passthrough\nfunction passthrough() {\n    Outputs.ID = id;\n    Outputs.Label = label;\n    Outputs.Price = price;\n    Outputs.Icon = icon;\n    Outputs.Weather = weather;\n    Outputs.Time = time;\n    Outputs.Months = months;\n    Outputs.Checked = checked; // Added checked\n    Outputs.Failure();\n}\n\n// Main logic\nloadSelection(id, function(result) {\n    if (result) {\n        Outputs.ID = result.id;\n        Outputs.Label = result.label;\n        Outputs.Price = result.price || '';\n        Outputs.Icon = result.icon || '';\n        Outputs.Weather = result.weather || '';\n        Outputs.Time = result.time || '';\n        Outputs.Months = result.months || '';\n        Outputs.Checked = result.checked || false; // Added checked handling\n        Outputs.Success();\n    } else {\n        passthrough();\n    }\n});\n"},"ports":[{"name":"in-ID","displayName":"ID","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-Label","displayName":"Label","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-Price","displayName":"Price","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-Icon","displayName":"Icon","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-Weather","displayName":"Weather","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-Time","displayName":"Time","plug":"input","type":"*","group":"Inputs","index":9},{"name":"in-Months","displayName":"Months","plug":"input","type":"*","group":"Inputs","index":10},{"name":"in-Checked","displayName":"Checked","plug":"input","type":"*","group":"Inputs","index":11},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":12},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":13},{"name":"out-ID","displayName":"ID","plug":"output","type":"*","group":"Outputs","index":14},{"name":"out-Label","displayName":"Label","plug":"output","type":"*","group":"Outputs","index":15},{"name":"out-Price","displayName":"Price","plug":"output","type":"*","group":"Outputs","index":16},{"name":"out-Icon","displayName":"Icon","plug":"output","type":"*","group":"Outputs","index":17},{"name":"out-Weather","displayName":"Weather","plug":"output","type":"*","group":"Outputs","index":18},{"name":"out-Time","displayName":"Time","plug":"output","type":"*","group":"Outputs","index":19},{"name":"out-Months","displayName":"Months","plug":"output","type":"*","group":"Outputs","index":20},{"name":"out-Checked","displayName":"Checked","plug":"output","type":"*","group":"Outputs","index":21}],"children":[]},{"id":"631e5ca8-a7d7-73c9-5afe-9ff0a411bee1","type":"JavaScriptFunction","parameters":{"functionScript":"const id = Inputs.ID || '';\r\nconst label = Inputs.Label || '';\r\nconst checked = Inputs.Checked; // Expecting a boolean input\r\nconst changed = Inputs.Changed; // Signal input, used as a trigger\r\nconst icon = Inputs.Icon || ''; // Added icon\r\nconst obtained = Inputs.Obtained || ''; // Added obtained\r\nconst price = Inputs.Price || ''; // Added price\r\nconst weather = Inputs.Weather || ''; // Added weather\r\nconst time = Inputs.Time || ''; // Added time\r\nconst months = Inputs.Months || ''; // Added months\r\n\r\n// Function to load data from localStorage\r\nfunction loadSelection(id, callback) {\r\n    const storedData = localStorage.getItem(id);\r\n    if (storedData) {\r\n        callback(JSON.parse(storedData));\r\n    } else {\r\n        callback(null);\r\n    }\r\n}\r\n\r\n// Function to save data to localStorage\r\nfunction saveSelection(selection) {\r\n    localStorage.setItem(selection.id, JSON.stringify(selection));\r\n}\r\n\r\n// Function to delete data from localStorage\r\nfunction deleteSelection(id) {\r\n    localStorage.removeItem(id);\r\n}\r\n\r\n// Function to check if data has changed and save or delete if necessary\r\nfunction checkAndUpdateSelection(selection) {\r\n    loadSelection(selection.id, function(existingItem) {\r\n        let dataChanged = false;\r\n\r\n        if (existingItem) {\r\n            if (selection.checked === false) {\r\n                // If the checkbox is unchecked, delete the entry\r\n                deleteSelection(selection.id);\r\n                Outputs.SavedSelection = null; // Indicate that nothing was saved\r\n                Outputs.Success();\r\n            } else {\r\n                // Check if the existing data is different from the new data\r\n                if (existingItem.label !== selection.label ||\r\n                    existingItem.checked !== selection.checked ||\r\n                    existingItem.icon !== selection.icon ||\r\n                    existingItem.obtained !== selection.obtained ||\r\n                    existingItem.price !== selection.price ||\r\n                    existingItem.weather !== selection.weather ||\r\n                    existingItem.time !== selection.time ||\r\n                    existingItem.months !== selection.months) {\r\n                    dataChanged = true;\r\n                }\r\n\r\n                if (dataChanged) {\r\n                    saveSelection(selection);\r\n                    Outputs.SavedSelection = selection;\r\n                    Outputs.Success();\r\n                } else {\r\n                    passthrough();\r\n                }\r\n            }\r\n        } else {\r\n            if (selection.checked) {\r\n                // If the checkbox is checked and no existing item, save the new item\r\n                saveSelection(selection);\r\n                Outputs.SavedSelection = selection;\r\n                Outputs.Success();\r\n            } else {\r\n                passthrough();\r\n            }\r\n        }\r\n        // Signal completion\r\n        Outputs.Completed = true; // or you can use Outputs.Completed = new Date().getTime(); for a timestamp\r\n    });\r\n}\r\n\r\n// Function to handle passthrough\r\nfunction passthrough() {\r\n    Outputs.ID = id;\r\n    Outputs.Label = label;\r\n    Outputs.Checked = checked;\r\n    Outputs.Icon = icon; // Added icon\r\n    Outputs.Obtained = obtained; // Added obtained\r\n    Outputs.Price = price; // Added price\r\n    Outputs.Weather = weather; // Added weather\r\n    Outputs.Time = time; // Added time\r\n    Outputs.Months = months; // Added months\r\n    Outputs.Failure();\r\n    // Signal completion\r\n    Outputs.Completed = true; // or you can use Outputs.Completed = new Date().getTime(); for a timestamp\r\n}\r\n\r\n// Main logic\r\nconst selection = { id, label, checked, icon, obtained, price, weather, time, months }; // Added weather, time, and months\r\nif (changed) {\r\n    checkAndUpdateSelection(selection);\r\n} else {\r\n    passthrough();\r\n}\r\n"},"ports":[{"name":"in-ID","displayName":"ID","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-Label","displayName":"Label","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-Checked","displayName":"Checked","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-Changed","displayName":"Changed","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-Icon","displayName":"Icon","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-Obtained","displayName":"Obtained","plug":"input","type":"*","group":"Inputs","index":9},{"name":"in-Price","displayName":"Price","plug":"input","type":"*","group":"Inputs","index":10},{"name":"in-Weather","displayName":"Weather","plug":"input","type":"*","group":"Inputs","index":11},{"name":"in-Time","displayName":"Time","plug":"input","type":"*","group":"Inputs","index":12},{"name":"in-Months","displayName":"Months","plug":"input","type":"*","group":"Inputs","index":13},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":14},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":15},{"name":"out-SavedSelection","displayName":"SavedSelection","plug":"output","type":"*","group":"Outputs","index":16},{"name":"out-Completed","displayName":"Completed","plug":"output","type":"*","group":"Outputs","index":17},{"name":"out-ID","displayName":"ID","plug":"output","type":"*","group":"Outputs","index":18},{"name":"out-Label","displayName":"Label","plug":"output","type":"*","group":"Outputs","index":19},{"name":"out-Checked","displayName":"Checked","plug":"output","type":"*","group":"Outputs","index":20},{"name":"out-Icon","displayName":"Icon","plug":"output","type":"*","group":"Outputs","index":21},{"name":"out-Obtained","displayName":"Obtained","plug":"output","type":"*","group":"Outputs","index":22},{"name":"out-Price","displayName":"Price","plug":"output","type":"*","group":"Outputs","index":23},{"name":"out-Weather","displayName":"Weather","plug":"output","type":"*","group":"Outputs","index":24},{"name":"out-Time","displayName":"Time","plug":"output","type":"*","group":"Outputs","index":25},{"name":"out-Months","displayName":"Months","plug":"output","type":"*","group":"Outputs","index":26}],"children":[]}],"connections":[{"sourceId":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","sourcePort":"out-ID","targetId":"631e5ca8-a7d7-73c9-5afe-9ff0a411bee1","targetPort":"in-ID"},{"sourceId":"631e5ca8-a7d7-73c9-5afe-9ff0a411bee1","sourcePort":"out-ID","targetId":"870cfb4c-7c94-b58f-fe47-8608ea537e51","targetPort":"modelId"},{"sourceId":"631e5ca8-a7d7-73c9-5afe-9ff0a411bee1","sourcePort":"out-Checked","targetId":"870cfb4c-7c94-b58f-fe47-8608ea537e51","targetPort":"prop-Checked"},{"sourceId":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","sourcePort":"out-Label","targetId":"631e5ca8-a7d7-73c9-5afe-9ff0a411bee1","targetPort":"in-Label"},{"sourceId":"6974af9b-1a24-4285-7d37-ffb29930967c","sourcePort":"id","targetId":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","targetPort":"in-ID"},{"sourceId":"6974af9b-1a24-4285-7d37-ffb29930967c","sourcePort":"prop-Label","targetId":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","targetPort":"in-Label"},{"sourceId":"6974af9b-1a24-4285-7d37-ffb29930967c","sourcePort":"prop-Image","targetId":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","targetPort":"in-Icon"},{"sourceId":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","sourcePort":"out-Label","targetId":"7ecfb115-f05c-e0e6-7663-9a39ac7c0fcb","targetPort":"text"},{"sourceId":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","sourcePort":"out-Icon","targetId":"5eb5ceac-e239-2ac8-f2b6-387b879925e8","targetPort":"src"},{"sourceId":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","sourcePort":"out-Price","targetId":"6957d9d1-5f90-484c-9e73-eb22752b5086","targetPort":"text"},{"sourceId":"6974af9b-1a24-4285-7d37-ffb29930967c","sourcePort":"prop-Checked","targetId":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","targetPort":"in-Checked"},{"sourceId":"6974af9b-1a24-4285-7d37-ffb29930967c","sourcePort":"prop-Price","targetId":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","targetPort":"in-Price"},{"sourceId":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","sourcePort":"out-Weather","targetId":"c4f1f2e6-024f-fb50-75a7-d9accc651dea","targetPort":"text"},{"sourceId":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","sourcePort":"out-Time","targetId":"403c9b9c-fcc9-a4c9-ffa3-bda2f56dde94","targetPort":"text"},{"sourceId":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","sourcePort":"out-Months","targetId":"f28c0664-8493-43c5-9be0-7ee76a3e9f79","targetPort":"text"},{"sourceId":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","sourcePort":"out-Price","targetId":"631e5ca8-a7d7-73c9-5afe-9ff0a411bee1","targetPort":"in-Price"},{"sourceId":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","sourcePort":"out-Icon","targetId":"631e5ca8-a7d7-73c9-5afe-9ff0a411bee1","targetPort":"in-Icon"},{"sourceId":"6974af9b-1a24-4285-7d37-ffb29930967c","sourcePort":"prop-Location","targetId":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","targetPort":"in-Weather"},{"sourceId":"6974af9b-1a24-4285-7d37-ffb29930967c","sourcePort":"prop-Time","targetId":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","targetPort":"in-Time"},{"sourceId":"6974af9b-1a24-4285-7d37-ffb29930967c","sourcePort":"prop-Months","targetId":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","targetPort":"in-Months"},{"sourceId":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","sourcePort":"out-Weather","targetId":"631e5ca8-a7d7-73c9-5afe-9ff0a411bee1","targetPort":"in-Weather"},{"sourceId":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","sourcePort":"out-Time","targetId":"631e5ca8-a7d7-73c9-5afe-9ff0a411bee1","targetPort":"in-Time"},{"sourceId":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","sourcePort":"out-Months","targetId":"631e5ca8-a7d7-73c9-5afe-9ff0a411bee1","targetPort":"in-Months"},{"sourceId":"cf4f51be-ca06-98df-0b28-3c9145f04e9f","sourcePort":"out-Checked","targetId":"430d5c2d-65ca-d53f-de91-fc011c53155a","targetPort":"checked"},{"sourceId":"430d5c2d-65ca-d53f-de91-fc011c53155a","sourcePort":"checked","targetId":"631e5ca8-a7d7-73c9-5afe-9ff0a411bee1","targetPort":"in-Checked"},{"sourceId":"430d5c2d-65ca-d53f-de91-fc011c53155a","sourcePort":"onChange","targetId":"631e5ca8-a7d7-73c9-5afe-9ff0a411bee1","targetPort":"in-Changed"},{"sourceId":"430d5c2d-65ca-d53f-de91-fc011c53155a","sourcePort":"onChange","targetId":"870cfb4c-7c94-b58f-fe47-8608ea537e51","targetPort":"store"}],"ports":[],"roots":["7e09a64a-b95a-0c80-b70f-fbf4dea3d9d0"]}]